import{P as a,B as e,r as s,c as t,w as r,i as o,o as l,a as i,d as c,t as d,u as n,N as u,O as f,H as m,m as p,Q as _,R as b,T as g,D as y,E as x}from"./index-CXRbaKsi.js";import{_ as v}from"./uni-nav-bar.pIin5XDL.js";import{_ as h,b as j,r as k}from"./uni-app.es.4GHwWxH-.js";import{u as w}from"./orderStore.Cgi5Rf7z.js";import{f as N}from"./formatPrice.BUD-VLoc.js";import{r as T}from"./index.TDGrnhG4.js";import"./uni-icons.CASMTA-H.js";const C=h({__name:"confirm-pay",setup(h){const C=w();let M="";j((()=>{var s;a(),(null==(s=C.orderMessage)?void 0:s.orderNumber)||e({title:"请重新进入页面",icon:"error"})}));const P=()=>{u()},F=a=>{M=a.detail.value},q=async()=>{if(!M)return e({title:"请先选择支付方式",icon:"error"});f({mask:!0,title:"支付中"});const s=await T.patch("/order/paid",{},{orderNumber:C.orderMessage.orderNumber});setTimeout((()=>{if(a(),201!==s.status)return e({title:"支付失败，请重试",icon:"error"});e({title:"支付成功"}),m({url:"/pages/trip/trip"})}),2e3)};return(a,e)=>{const u=k(s("uni-nav-bar"),v),f=p,m=o,h=_,j=b,w=g,T=y,M=x;return l(),t(m,{class:"confirm-pay"},{default:r((()=>[i(u,{dark:"",fixed:!0,"background-color":"#c5b6a0","status-bar":"","left-icon":"left","left-text":"返回",title:"确认支付",onClickLeft:P}),i(m,{class:"pay-way"},{default:r((()=>[i(w,{onChange:F},{default:r((()=>[i(m,{class:"pay-item"},{default:r((()=>[i(f,{src:"https://img.picgo.net/2025/02/13/wechat-paybea6b0df48d1ac15.png",mode:"scaleToFill"}),i(m,{class:"text"},{default:r((()=>[c(" 微信支付 "),i(m,{class:"reconmannd"},{default:r((()=>[c("推荐微信用户使用")])),_:1})])),_:1}),i(j,{class:"radio"},{default:r((()=>[i(h,{value:"wechat"})])),_:1})])),_:1}),i(m,{class:"pay-item"},{default:r((()=>[i(f,{src:"https://img.picgo.net/2025/02/13/ali-payeb759f8997ced4a4.png",mode:"scaleToFill"}),i(m,{class:"text"},{default:r((()=>[c(" 支付宝支付 "),i(m,{class:"reconmannd"},{default:r((()=>[c("推荐支付宝用户使用")])),_:1})])),_:1}),i(j,{class:"radio"},{default:r((()=>[i(h,{value:"ali"})])),_:1})])),_:1})])),_:1})])),_:1}),i(m,{class:"bottom-bar"},{default:r((()=>[i(m,{class:"text"},{default:r((()=>[c(" 合计： "),i(T,{style:{color:"#9bc4d1","font-size":"36rpx"}},{default:r((()=>[c(d(n(N)(n(C).orderMessage.totalPrice,2))+" ￥",1)])),_:1})])),_:1}),i(m,{class:""},{default:r((()=>[i(M,{class:"pay-btn",type:"default",onClick:q},{default:r((()=>[c("支付")])),_:1})])),_:1})])),_:1})])),_:1})}}},[["__scopeId","data-v-c811d322"]]);export{C as default};
