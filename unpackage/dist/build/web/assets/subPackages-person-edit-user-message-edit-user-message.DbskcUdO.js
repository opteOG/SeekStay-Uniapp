import{h as e,a2 as a,r as t,c as l,w as o,i as s,o as u,a as n,d as r,B as m,N as i,E as d}from"./index-CXRbaKsi.js";import{_ as c}from"./uni-nav-bar.pIin5XDL.js";import{_ as f,r as p}from"./uni-app.es.4GHwWxH-.js";import{_ as b,a as _,b as h}from"./uni-forms.BSZeLArO.js";import{u as V}from"./userStore.Bb1cC01o.js";import"./uni-icons.CASMTA-H.js";import"./index.TDGrnhG4.js";const g=f({__name:"edit-user-message",setup(f){const g=e(),x={introduce:{rules:[{maxLength:40,errorMessage:"简介长度不超过40字"}]},phoneNumber:{rules:[{validateFunction:function(e,a,t,l){console.log(a);return!!/^1[3-9]\d{9}$/.test(a)||(l("电话格式不正确，请重新输入"),!1)}}]},email:{rules:[{validateFunction:function(e,a,t,l){console.log(a);return!!/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(a)||(l("邮箱格式不正确，请重新输入"),!1)}}]}},j=V(),v=a({phoneNumber:j.phoneNumber,email:j.email,introduce:j.introduce}),N=()=>{g.value.validate().then((e=>{j.updateUserData(v),m({title:"修改信息成功"}),i()})).catch((e=>{console.log(e)}))},y=()=>{i()};return(e,a)=>{const m=p(t("uni-nav-bar"),c),i=p(t("uni-easyinput"),b),f=p(t("uni-forms-item"),_),V=d,j=p(t("uni-forms"),h),k=s;return u(),l(k,{class:"edit-message"},{default:o((()=>[n(m,{dark:"",fixed:!0,shadow:"","background-color":"#c5b6a0","status-bar":"","left-icon":"left","left-text":"返回",title:"编辑个人信息",onClickLeft:y}),n(k,{class:"content"},{default:o((()=>[n(j,{ref_key:"form",ref:g,rules:x,modelValue:v},{default:o((()=>[n(f,{label:"电话",name:"phoneNumber"},{default:o((()=>[n(i,{type:"number",modelValue:v.phoneNumber,"onUpdate:modelValue":a[0]||(a[0]=e=>v.phoneNumber=e)},null,8,["modelValue"])])),_:1}),n(f,{label:"邮箱",name:"email"},{default:o((()=>[n(i,{type:"text",modelValue:v.email,"onUpdate:modelValue":a[1]||(a[1]=e=>v.email=e)},null,8,["modelValue"])])),_:1}),n(f,{label:"个人介绍",name:"introduce"},{default:o((()=>[n(i,{type:"textarea",modelValue:v.introduce,"onUpdate:modelValue":a[2]||(a[2]=e=>v.introduce=e)},null,8,["modelValue"])])),_:1}),n(V,{class:"form-btn",type:"default",onClick:N},{default:o((()=>[r("提交")])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1})}}},[["__scopeId","data-v-1c844e39"]]);export{g as default};
