import{G as a,A as t,a3 as e}from"./index-CXRbaKsi.js";import{r}from"./index.TDGrnhG4.js";const i=a("user",{state:()=>({phoneNumber:"",email:"",introduce:"",avatarUrl:"https://img.picgo.net/2025/02/12/imagese3b794525e1c26a9.jpg",name:""}),actions:{async fetchUserData(){var a,t,e,i,o,n;const s=await r.get("/profile");return(null==(a=s.data)?void 0:a.avatar_url)&&(this.avatarUrl=null==(t=s.data)?void 0:t.avatar_url),this.phoneNumber=null==(e=s.data)?void 0:e.phone_number,this.email=null==(i=s.data)?void 0:i.email,this.introduce=null==(o=s.data)?void 0:o.introduce,this.name=null==(n=s.data)?void 0:n.name,s},async updateUserData(a){const{phoneNumber:t,email:e,introduce:i}=a;t&&(await r.patch("/profile/phone",{},{phone:t}),this.phoneNumber=t),e&&(await r.patch("/profile/email",{},{email:e}),this.email=e),i&&(await r.patch("/profile/introduce",{},{introduce:i}),this.introduce=i)},async upLoadAvatar(a){const r=t("user_token");e({url:"http://47.108.24.123:3004/file/avatar",filePath:a,name:"avatar",header:{Authorization:`Bearer ${r}`},success:a=>{this.avatarUrl=JSON.parse(a.data).avatarUrl,console.log(this.avatarUrl)}})}}});export{i as u};
