import{o as e,c as a,w as s,a as l,d as o,m as t,i as r,h as i,a2 as d,r as n,l as c,B as u,a6 as m,H as f,E as p,V as g,U as _}from"./index-CXRbaKsi.js";import{_ as h,r as w}from"./uni-app.es.4GHwWxH-.js";import{_ as b}from"./uni-icons.CASMTA-H.js";import{_ as x,a as k,b as y}from"./uni-forms.BSZeLArO.js";import{t as v}from"./tokenNavigateTo.DmpTWe7d.js";import{r as V}from"./index.TDGrnhG4.js";const C=h({},[["render",function(i,d){const n=t,c=r;return e(),a(c,{class:"login-bar"},{default:s((()=>[l(c,{class:"login-other"},{default:s((()=>[l(n,{class:"login-item",src:"https://img.picgo.net/2025/02/13/QQc0a6565d49111f5b.png",mode:"scaleToFill"}),l(c,{class:"text"},{default:s((()=>[o("QQ登录")])),_:1})])),_:1}),l(c,{class:"login-other"},{default:s((()=>[l(n,{class:"login-item",src:"https://img.picgo.net/2025/02/13/weibo9660b2a3e646619a.png",mode:"scaleToFill"}),l(c,{class:"text"},{default:s((()=>[o("微博登录")])),_:1})])),_:1}),l(c,{class:"login-other"},{default:s((()=>[l(n,{class:"login-item",src:"https://img.picgo.net/2025/02/13/wechatefe102185734cf79.png",mode:"scaleToFill"}),l(c,{class:"text"},{default:s((()=>[o("微信登录")])),_:1})])),_:1})])),_:1})}],["__scopeId","data-v-f6604d00"]]),j=h({__name:"login",setup(h){const j=i(),T=d({name:"",password:""}),F={name:{rules:[{required:!0,errorMessage:"请输入手机号或用户名"}]},password:{rules:[{required:!0,errorMessage:"请输入密码"},{minLength:6,maxLength:16,errorMessage:"密码长度在6-16个字符之间"}]}},Q=()=>{v("/subPackages/user/phone-register/phone-register",!1)},L=()=>{j.value.validate().then((e=>{V.post("/login",{},{name:T.name,password:T.password}).then((e=>{-1003===e.code&&u({title:e.message,icon:"error"}),-1004===e.code&&u({title:e.message,icon:"error"}),m("user_token",e.data.token),f({url:"/pages/search/search"}),u({title:"登录成功"})}))})).catch((e=>{console.log(e)}))},M=()=>{T.name="",T.password="",j.value.clearValidate()};return(i,d)=>{const u=t,m=r,f=p,h=w(n("LoginBar"),C),v=w(n("uni-icons"),b),V=g,U=w(n("uni-easyinput"),x),q=w(n("uni-forms-item"),k),z=w(n("uni-forms"),y),B=_;return e(),a(m,{class:"login"},{default:s((()=>[l(B,{vertical:"true",style:{height:"100vh"}},{default:s((()=>[l(V,null,{default:s((()=>[l(m,{class:"swiper-item"},{default:s((()=>[l(m,{class:"view1"},{default:s((()=>[l(m,{class:"logo"},{default:s((()=>[l(u,{class:"img",src:"https://img.picgo.net/2025/02/13/seekstayb3a7c86cda0409f8.png",mode:"scaleToFill"}),c("h2",{class:"title"},"寻栖欢迎您")])),_:1}),l(m,{class:"register"},{default:s((()=>[l(f,{class:"btn",onClick:Q,style:{backgroundColor:"#7f6147",color:"white","border-radius":"40rpx"}},{default:s((()=>[o("手机号注册")])),_:1})])),_:1}),l(m,{class:"login-other"},{default:s((()=>[l(m,{class:"other-text"},{default:s((()=>[l(m,null,{default:s((()=>[o("或用以下方式登录")])),_:1})])),_:1}),l(h)])),_:1}),l(m,{class:"go-login"},{default:s((()=>[l(m,null,{default:s((()=>[o("已有账号？去登录！")])),_:1}),l(v,{type:"down",color:"#515151",size:"24"})])),_:1})])),_:1})])),_:1})])),_:1}),l(V,null,{default:s((()=>[l(m,{class:"swiper-item"},{default:s((()=>[l(m,{class:"view2"},{default:s((()=>[l(m,{class:"go-login"},{default:s((()=>[l(v,{type:"up",color:"#515151",size:"24"}),l(m,null,{default:s((()=>[o("没有账号？去注册！")])),_:1})])),_:1}),l(m,{class:"form-data"},{default:s((()=>[l(z,{ref_key:"formRef",ref:j,rules:F,modelValue:T},{default:s((()=>[l(q,{label:"用户名",name:"name"},{default:s((()=>[l(U,{modelValue:T.name,"onUpdate:modelValue":d[0]||(d[0]=e=>T.name=e),placeholder:"请输入手机号/昵称",primaryColor:"#c4b8a1"},null,8,["modelValue"])])),_:1}),l(q,{label:"密码",name:"password"},{default:s((()=>[l(U,{type:"password",modelValue:T.password,"onUpdate:modelValue":d[1]||(d[1]=e=>T.password=e),placeholder:"6-16位字符",primaryColor:"#c4b8a1"},null,8,["modelValue"])])),_:1})])),_:1},8,["modelValue"]),l(m,{class:"foget-password"},{default:s((()=>[o("忘记密码？")])),_:1}),l(f,{class:"btn",onClick:L,style:{backgroundColor:"#7f6147",color:"white","border-radius":"40rpx","margin-top":"50rpx"}},{default:s((()=>[o("提交")])),_:1}),l(f,{class:"btn",onClick:M,style:{backgroundColor:"#7f6147",color:"white","border-radius":"40rpx","margin-top":"50rpx"}},{default:s((()=>[o("重置")])),_:1})])),_:1}),l(m,{class:"login-other register-other"},{default:s((()=>[l(m,{class:"other-text"},{default:s((()=>[l(m,null,{default:s((()=>[o("或用以下方式登录")])),_:1})])),_:1}),l(h)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})}}},[["__scopeId","data-v-e5672ec4"]]);export{j as default};
