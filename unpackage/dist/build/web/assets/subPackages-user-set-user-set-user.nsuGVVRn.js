import{h as e,a2 as a,r as s,c as r,w as o,i as l,o as t,a as n,d,a6 as u,B as m,H as i,N as p,E as c}from"./index-CXRbaKsi.js";import{_ as f}from"./uni-nav-bar.pIin5XDL.js";import{_ as g,c as w,r as _}from"./uni-app.es.4GHwWxH-.js";import{_ as b,a as h,b as v}from"./uni-forms.BSZeLArO.js";import{r as V}from"./index.TDGrnhG4.js";import"./uni-icons.CASMTA-H.js";const x=g({__name:"set-user",setup(g){const x=e(),y=a({name:"",password:"",confirmPassword:""}),k={name:{rules:[{required:!0,errorMessage:"请输入手机号或用户名"},{maxLength:10,errorMessage:"用户名长度不能超过10位"}]},password:{rules:[{required:!0,errorMessage:"请输入密码"},{minLength:6,maxLength:16,errorMessage:"密码长度在6-16个字符之间"}]},confirmPassword:{rules:[{required:!0,errorMessage:"请确认密码"},{validateFunction:(e,a,s,r)=>(a!==y.password&&r("两次输入密码不一致，请检查"),!0)}]}};w((()=>{x.value.setRules(k)}));const j=()=>{x.value.validate().then((e=>{V.post("/register",{},{name:e.name,password:e.password}).then((e=>{-1002!==e.code?(u("user_token",e.data.token),m({title:"注册成功"}),i({url:"/pages/search/search"})):(k.name.rules.push({validateFunction:(a,s,r,o)=>(o(e.message),!0)}),x.value.setRules(k),x.value.validate(),k.name.rules.pop())}))})).catch((e=>{console.log(e)}))},C=()=>{p()};return(e,a)=>{const u=_(s("uni-nav-bar"),f),m=_(s("uni-easyinput"),b),i=_(s("uni-forms-item"),h),p=_(s("uni-forms"),v),g=c,w=l;return t(),r(w,{class:"register"},{default:o((()=>[n(u,{fixed:!0,"background-color":"#c5b6a0","status-bar":"","left-icon":"left","left-text":"返回",title:"输入个人信息",onClickLeft:C}),n(w,{class:"form-data"},{default:o((()=>[n(p,{ref_key:"formRef",ref:x,modelValue:y},{default:o((()=>[n(i,{label:"用户名",name:"name"},{default:o((()=>[n(m,{modelValue:y.name,"onUpdate:modelValue":a[0]||(a[0]=e=>y.name=e),placeholder:"请输入昵称",primaryColor:"#c4b8a1"},null,8,["modelValue"])])),_:1}),n(i,{label:"密码",name:"password"},{default:o((()=>[n(m,{type:"password",modelValue:y.password,"onUpdate:modelValue":a[1]||(a[1]=e=>y.password=e),placeholder:"6-16位字符",primaryColor:"#c4b8a1"},null,8,["modelValue"])])),_:1}),n(i,{label:"确认密码",name:"confirmPassword"},{default:o((()=>[n(m,{type:"password",modelValue:y.confirmPassword,"onUpdate:modelValue":a[2]||(a[2]=e=>y.confirmPassword=e),placeholder:"6-16位字符",primaryColor:"#c4b8a1"},null,8,["modelValue"])])),_:1})])),_:1},8,["modelValue"]),n(g,{class:"btn",onClick:j,style:{backgroundColor:"#7f6147",color:"white","border-radius":"40rpx","margin-top":"250rpx"}},{default:o((()=>[d("注册")])),_:1})])),_:1})])),_:1})}}},[["__scopeId","data-v-3d0ce9c1"]]);export{x as default};
