{"version":3,"file":"trip-item.js","sources":["components/trip-item/trip-item.vue","D:/download/HBuilderX.4.15.2024050802/HBuilderX/plugins/uniapp-cli-vite/uniComponent:/RTovcHJvamVjdF9hbGwvU2Vla1N0YXkvc2Vla3N0YXkvY29tcG9uZW50cy90cmlwLWl0ZW0vdHJpcC1pdGVtLnZ1ZQ"],"sourcesContent":["<template>\n\t<view class=\"trip-item\">\n\t\t<uni-card :title=\"detailData?.location\" :sub-title=\"detailData?.description\" :extra=\"orderStatus\" padding=\"10px 0\" >\r\n\t\t\t<image style=\"width: 100%;\" :src=\"detailData?.imgUrl[0]\"></image>\r\n\t\t\t<view class=\"time\">\r\n\t\t\t\t<uni-dateformat :date=\"orderData?.startDate\" format='yyyy-MM-dd'/>\r\n\t\t\t\t<text>——</text>\r\n\t\t\t\t<uni-dateformat :date=\"orderData?.endDate\" format='yyyy-MM-dd'/>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"last-day\">{{ lastDay }}</view>\r\n\t\t\t<view class=\"price\">共计：{{ formatPrice(orderData?.totalPrice, 2, '￥') }}</view>\r\n\t\t\t<view class=\"cancel\">\r\n\t\t\t\t<button class=\"cancel-btn\" type=\"default\" @click=\"handleCancelTrip\">取消行程</button>\r\n\t\t\t</view>\r\n\t\t</uni-card>\n\t</view>\n</template>\n\n<script setup>\nimport { computed } from 'vue';\r\nimport { formatDate } from '@/utils/formatDate.js'\r\nimport { formatPrice } from '@/utils/formatPrice.js'\n\r\nconst orderStatus = computed(() => {\r\n\tswitch(props.orderData.status) {\r\n\t\tcase 'pending'  : return '待支付'\r\n\t\tcase 'paid'     : return '已支付'\r\n\t\tcase 'ing'      : return '进行中'\r\n\t\tcase 'completed': return '已完成'\r\n\t\tcase 'concelled': return '已取消'\r\n\t}\r\n})\r\n\r\nconst lastDay = computed(() => {\r\n\tconst startDay = new Date(props.orderData.startDate)\r\n\tconst today = new Date()\r\n\tconst endDay = new Date(props.orderData.endDate)\r\n\tconst diffTime1 = startDay - today;\r\n\tconst diffTime2 = endDay - today\r\n\tconst ans = Math.ceil(diffTime1 / (1000 * 60 * 60 * 24))\r\n\tif(diffTime1 > 0) {\r\n\t\treturn `距离行程开始还有${ans}天`\r\n\t}\r\n\tif(diffTime1<=0 && diffTime2>=0) {\r\n\t\treturn '行程进行中'\r\n\t}\r\n\tif(diffTime2 <=0 ) {\r\n\t\treturn '行程已结束'\r\n\t}\r\n})\r\n\r\nconst emit = defineEmits(['delete'])\r\n\r\nconst props = defineProps({\r\n\torderData: {\r\n\t\ttype: Object\r\n\t},\r\n\tdetailData: {\r\n\t\ttype: Object\r\n\t}\r\n})\r\n\r\nconst handleCancelTrip = async () => {\r\n\tif(orderStatus.value === '已支付') {\r\n\t\treturn uni.showToast({\r\n\t\t\ttitle: '当前行程已支付，无法取消',\r\n\t\t\ticon: 'error'\r\n\t\t})\r\n\t}\r\n\tif(orderStatus.value === '进行中') {\r\n\t\treturn uni.showToast({\r\n\t\t\ttitle: '当前行程进行中，无法取消',\r\n\t\t\ticon: 'error'\r\n\t\t})\r\n\t}\r\n\t\r\n\temit('delete')\r\n\r\n}\r\n\r\n\n</script>\n\n<style scoped lang=\"scss\">\n\r\n.trip-item {\r\n\t.header {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\tbackground-color: #ffffff;\r\n\t}\r\n\t.time {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\tpadding: 0 10rpx;\r\n\t\tmargin-top: 40rpx;\r\n\t\tfont-size: 40rpx;\r\n\t\tfont-weight: 600;\r\n\t}\r\n\t.last-day {\r\n\t\ttext-align: center;\r\n\t\tfont-size: 36rpx;\r\n\t\tfont-weight: 540;\r\n\t\tmargin-top: 20rpx;\r\n\t}\r\n\t.price {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: flex-end;\r\n\t\tmargin-top: 40rpx;\r\n\t}\r\n\t.cancel {\r\n\t\twidth: 30%;\r\n\t\t.cancel-btn {\r\n\t\t\tdisplay: flex;\r\n\t\t\tjustify-content: center;\r\n\t\t\talign-items: center;\r\n\t\t\theight: 60rpx;\r\n\t\t\tbackground-color: #da0b64;\r\n\t\t\tcolor: #ffffff;\r\n\t\t\tfont-size: 24rpx;\r\n\t\t}\r\n\t}\r\n}\r\n\n</style>","import Component from 'E:/project_all/SeekStay/seekstay/components/trip-item/trip-item.vue'\nwx.createComponent(Component)"],"names":["computed","uni"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAuBA,UAAM,cAAcA,cAAQ,SAAC,MAAM;AAClC,cAAO,MAAM,UAAU,QAAM;AAAA,QAC5B,KAAK;AAAa,iBAAO;AAAA,QACzB,KAAK;AAAa,iBAAO;AAAA,QACzB,KAAK;AAAa,iBAAO;AAAA,QACzB,KAAK;AAAa,iBAAO;AAAA,QACzB,KAAK;AAAa,iBAAO;AAAA,MACzB;AAAA,IACF,CAAC;AAED,UAAM,UAAUA,cAAQ,SAAC,MAAM;AAC9B,YAAM,WAAW,IAAI,KAAK,MAAM,UAAU,SAAS;AACnD,YAAM,QAAQ,oBAAI,KAAM;AACxB,YAAM,SAAS,IAAI,KAAK,MAAM,UAAU,OAAO;AAC/C,YAAM,YAAY,WAAW;AAC7B,YAAM,YAAY,SAAS;AAC3B,YAAM,MAAM,KAAK,KAAK,aAAa,MAAO,KAAK,KAAK,GAAG;AACvD,UAAG,YAAY,GAAG;AACjB,eAAO,WAAW,GAAG;AAAA,MACrB;AACD,UAAG,aAAW,KAAK,aAAW,GAAG;AAChC,eAAO;AAAA,MACP;AACD,UAAG,aAAY,GAAI;AAClB,eAAO;AAAA,MACP;AAAA,IACF,CAAC;AAED,UAAM,OAAO;AAEb,UAAM,QAAQ;AASd,UAAM,mBAAmB,YAAY;AACpC,UAAG,YAAY,UAAU,OAAO;AAC/B,eAAOC,cAAAA,MAAI,UAAU;AAAA,UACpB,OAAO;AAAA,UACP,MAAM;AAAA,QACT,CAAG;AAAA,MACD;AACD,UAAG,YAAY,UAAU,OAAO;AAC/B,eAAOA,cAAAA,MAAI,UAAU;AAAA,UACpB,OAAO;AAAA,UACP,MAAM;AAAA,QACT,CAAG;AAAA,MACD;AAED,WAAK,QAAQ;AAAA,IAEd;;;;;;;;;;;;;;;;;;;;;;;;;;;AC7EA,GAAG,gBAAgB,SAAS;"}