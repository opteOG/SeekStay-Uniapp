{"version":3,"file":"VirtualList.js","sources":["components/VirtualList/VirtualList.vue","D:/download/HBuilderX.4.15.2024050802/HBuilderX/plugins/uniapp-cli-vite/uniComponent:/RTovcHJvamVjdF9hbGwvU2Vla1N0YXkvc2Vla3N0YXkvY29tcG9uZW50cy9WaXJ0dWFsTGlzdC9WaXJ0dWFsTGlzdC52dWU"],"sourcesContent":["<template>\n\t<scroll-view class=\"list-wrap\" \r\n\t\tscroll-y=\"true\" \r\n\t\t@scroll=\"handleScroll\"\r\n\t\t:style=\"{height: contentHeight * 2 + 'rpx'}\"\r\n\t>\r\n\t\t<view class=\"virtual-list\" :style=\"{height: listHeight * 2 + 'rpx'}\">\r\n\t\t\t<view class=\"virtual-list-item\" \r\n\t\t\t\tv-for=\"(item, index) in visibleList\" \r\n\t\t\t\t:style=\"{top: getItemTop(startIndex + index) * 2 + 'rpx'}\"\r\n\t\t\t\t:key='startIndex + index'\r\n\t\t\t>\r\n\t\t\t\t<slot :item=\"item\" :key=\"index\">\r\n\t\t\t\t</slot>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</scroll-view>\n</template>\n\n<script setup>\nimport { computed, ref, toRefs } from 'vue';\n\nconst props = defineProps({\r\n\tlist: { // 数据列表\r\n\t\ttype: Array,\r\n\t\trequire: true\r\n\t},\r\n\titemHeight: { // 数据高度\r\n\t\ttype: Number,\r\n\t\trequire: true\r\n\t}, \r\n\tcontentHeight: { // 容器高度\r\n\t\ttype: Number,\r\n\t\trequire: true\r\n\t}\r\n})\r\nconst {list, itemHeight, contentHeight} = toRefs(props)\r\n\r\nconst scollTop = ref(0) // 已经滚出上方的距离\r\nconst listHeight = computed(() => { // 数据列表总高度\r\n\treturn list.value.length * itemHeight.value\r\n})\r\nconst visibleCount = computed(() => {  // 可以展示的数据个数\r\n\treturn \tMath.ceil(contentHeight.value / itemHeight.value)\r\n})\r\nconst startIndex = computed(() => { // 开始展示的数据索引\r\n\treturn Math.floor(scollTop.value / itemHeight.value)\r\n})\r\nconst endIndex = computed(() => { // 结束展示的数据索引\r\n\treturn startIndex.value + visibleCount.value\r\n})\r\nconst visibleList = computed(() => { // 在可视容器中的数据列表\r\n\treturn list.value.slice(startIndex.value, endIndex.value)\r\n})\r\nconst handleScroll = (e) => { // 监听滚动事件\r\n\tscollTop.value = e.detail.scrollTop\r\n}\r\nconst getItemTop = (index) => { // 计算每个数据的top\r\n\treturn index * itemHeight.value\r\n}\n</script>\n\n<style scoped lang=\"scss\">\n.list-wrap {\r\n\tposition: relative;\r\n\t.virtual-list {\r\n\t\twidth: 100%;\r\n\t\tposition: relative;\r\n\t\t.virtual-list-item {\r\n\t\t\tposition: absolute;\r\n\t\t\twidth: 100%;\r\n\t\t}\r\n\t}\r\n}\n</style>","import Component from 'E:/project_all/SeekStay/seekstay/components/VirtualList/VirtualList.vue'\nwx.createComponent(Component)"],"names":["toRefs","ref","computed"],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAsBA,UAAM,QAAQ;AAcd,UAAM,EAAC,MAAM,YAAY,cAAa,IAAIA,cAAAA,OAAO,KAAK;AAEtD,UAAM,WAAWC,cAAG,IAAC,CAAC;AACtB,UAAM,aAAaC,cAAQ,SAAC,MAAM;AACjC,aAAO,KAAK,MAAM,SAAS,WAAW;AAAA,IACvC,CAAC;AACD,UAAM,eAAeA,cAAQ,SAAC,MAAM;AACnC,aAAQ,KAAK,KAAK,cAAc,QAAQ,WAAW,KAAK;AAAA,IACzD,CAAC;AACD,UAAM,aAAaA,cAAQ,SAAC,MAAM;AACjC,aAAO,KAAK,MAAM,SAAS,QAAQ,WAAW,KAAK;AAAA,IACpD,CAAC;AACD,UAAM,WAAWA,cAAQ,SAAC,MAAM;AAC/B,aAAO,WAAW,QAAQ,aAAa;AAAA,IACxC,CAAC;AACD,UAAM,cAAcA,cAAQ,SAAC,MAAM;AAClC,aAAO,KAAK,MAAM,MAAM,WAAW,OAAO,SAAS,KAAK;AAAA,IACzD,CAAC;AACD,UAAM,eAAe,CAAC,MAAM;AAC3B,eAAS,QAAQ,EAAE,OAAO;AAAA,IAC3B;AACA,UAAM,aAAa,CAAC,UAAU;AAC7B,aAAO,QAAQ,WAAW;AAAA,IAC3B;;;;;;;;;;;;;;;;;;;;;;AC1DA,GAAG,gBAAgB,SAAS;"}