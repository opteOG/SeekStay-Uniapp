{"version":3,"file":"login.js","sources":["subPackages/user/login/login.vue","D:/download/HBuilderX.4.15.2024050802/HBuilderX/plugins/uniapp-cli-vite/uniPage:/c3ViUGFja2FnZXNcdXNlclxsb2dpblxsb2dpbi52dWU"],"sourcesContent":["<template>\n\t<view class=\"login\">\r\n\t\t<!-- 内容 -->\r\n\r\n\t\t\t<swiper vertical=true style=\"height: 100vh;\">\r\n\t\t\t\t<swiper-item>\r\n\t\t\t\t\t<view class=\"swiper-item\">\r\n\t\t\t\t\t\t<view class=\"view1\">\r\n\t\t\t\t\t\t\t<view class=\"logo\">\r\n\t\t\t\t\t\t\t\t<image class=\"img\" src=\"https://img.picgo.net/2025/02/13/seekstayb3a7c86cda0409f8.png\" mode=\"scaleToFill\"></image>\r\n\t\t\t\t\t\t\t\t<h2 class=\"title\">寻栖欢迎您</h2>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"register\">\r\n\t\t\t\t\t\t\t\t<button class=\"btn\" @click=\"handleRegister\" style=\"backgroundColor: #7f6147; color: white; border-radius: 40rpx;\">手机号注册</button>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"login-other\">\r\n\t\t\t\t\t\t\t\t<view class=\"other-text\">\r\n\t\t\t\t\t\t\t\t\t<view>或用以下方式登录</view>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<LoginBar></LoginBar>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"go-login\">\r\n\t\t\t\t\t\t\t\t<view>已有账号？去登录！</view>\r\n\t\t\t\t\t\t\t\t<uni-icons type=\"down\" color=\"#515151\" size=\"24\"></uni-icons>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</swiper-item>\r\n\t\t\t\t<swiper-item>\r\n\t\t\t\t\t<view class=\"swiper-item\">\r\n\t\t\t\t\t\t<view class=\"view2\">\r\n\t\t\t\t\t\t\t<view class=\"go-login\">\r\n\t\t\t\t\t\t\t\t<uni-icons type=\"up\" color=\"#515151\" size=\"24\"></uni-icons>\r\n\t\t\t\t\t\t\t\t<view>没有账号？去注册！</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"form-data\">\r\n\t\t\t\t\t\t\t\t<uni-forms ref=\"formRef\" :rules=\"rules\" :modelValue=\"formData\">\r\n\t\t\t\t\t\t\t\t\t<uni-forms-item label=\"用户名\" name=\"name\">\r\n\t\t\t\t\t\t\t\t\t\t<uni-easyinput  v-model=\"formData.name\" placeholder=\"请输入手机号/昵称\" primaryColor=\"#c4b8a1\" />\r\n\t\t\t\t\t\t\t\t\t</uni-forms-item>\r\n\t\t\t\t\t\t\t\t\t<uni-forms-item label=\"密码\" name=\"password\">\r\n\t\t\t\t\t\t\t\t\t\t<uni-easyinput type=\"password\"  v-model=\"formData.password\" placeholder=\"6-16位字符\" primaryColor=\"#c4b8a1\" />\r\n\t\t\t\t\t\t\t\t\t</uni-forms-item>\r\n\t\t\t\t\t\t\t\t</uni-forms>\r\n\t\t\t\t\t\t\t\t<view class=\"foget-password\">忘记密码？</view>\r\n\t\t\t\t\t\t\t\t<button class=\"btn\" @click=\"handleSubmit\" style=\"backgroundColor: #7f6147; color: white; border-radius: 40rpx; margin-top: 50rpx;\">提交</button>\r\n\t\t\t\t\t\t\t\t<button class=\"btn\" @click=\"handleReset\" style=\"backgroundColor: #7f6147; color: white; border-radius: 40rpx; margin-top: 50rpx;\">重置</button>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"login-other register-other\">\r\n\t\t\t\t\t\t\t\t<view class=\"other-text\">\r\n\t\t\t\t\t\t\t\t\t<view>或用以下方式登录</view>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<LoginBar></LoginBar>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</swiper-item>\r\n\t\t\t</swiper>\r\n\t\t\t\r\n\t\t\t\r\n\r\n\t</view>\n</template>\n\n<script setup>\nimport { reactive, ref } from 'vue';\nimport { tokenNavigateTo } from '@/utils/tokenNavigateTo.js';\r\nimport requestService from '@/service/index.js'\n\r\nconst formRef = ref()\r\n// 表单数据\r\nconst formData = reactive({\r\n\tname: '',\r\n\tpassword: ''\r\n})\r\n// 校验规则\r\nconst rules = {\r\n\tname: {\r\n\t\trules: [\r\n\t\t\t{\r\n\t\t\t\trequired: true,\r\n\t\t\t\terrorMessage: '请输入手机号或用户名'\r\n\t\t\t}\r\n\t\t]\r\n\t},\r\n\tpassword: {\r\n\t\trules: [\r\n\t\t\t{\r\n\t\t\t\trequired: true,\r\n\t\t\t\terrorMessage: '请输入密码'\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tminLength: 6,\r\n\t\t\t\tmaxLength: 16,\r\n\t\t\t\terrorMessage: '密码长度在6-16个字符之间'\r\n\t\t\t}\r\n\t\t]\r\n\t}\r\n}\r\n// 处理手机号注册事件\r\nconst handleRegister = () => {\r\n\ttokenNavigateTo('/subPackages/user/phone-register/phone-register', false)\r\n}\r\n\r\n// 处理表单提交事件\r\nconst handleSubmit = () => {\r\n\tformRef.value.validate().then(res => {\r\n\t\trequestService.post('/login', {}, {\r\n\t\t\tname: formData.name,\r\n\t\t\tpassword: formData.password\r\n\t\t}).then(res => {\r\n\t\t\tif(res.code === -1003) {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: res.message,\r\n\t\t\t\t\ticon: 'error'\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\tif(res.code === -1004) {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: res.message,\r\n\t\t\t\t\ticon: 'error'\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\tuni.setStorageSync('user_token', res.data.token)\r\n\t\t\tuni.switchTab({\r\n\t\t\t\turl: '/pages/search/search'\r\n\t\t\t})\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: '登录成功'\r\n\t\t\t})\r\n\t\t})\r\n\t}).catch(err => {\r\n\t\tconsole.log(err);\r\n\t})\r\n}\r\n// 处理表单重置事件\r\nconst handleReset = () => {\r\n\tformData.name = \"\"\r\n\tformData.password = \"\"\r\n\tformRef.value.clearValidate()\r\n}\r\n\n</script>\n\n<style scoped lang=\"scss\">\n.login {\r\n\r\n\tbackground-color: #c4b8a1;\r\n\t.btn {\r\n\t\theight: 80rpx;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t}\r\n\t.logo{\t\r\n\t\tpadding: 40rpx;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\talign-items: center;\r\n\t\t.img {\r\n\t\t\twidth: 300rpx;\r\n\t\t\theight: 300rpx;\r\n\t\t}\r\n\t\t.title {\r\n\t\t\tcolor: #2d271b;\r\n\t\t\tfont-weight: 700;\r\n\t\t\tfont-size: 48rpx;\r\n\t\t\tfont-family: '宋体';\r\n\t\t}\r\n\t}\r\n\t.register {\r\n\t\tmargin: 280rpx 50rpx 0;\r\n\t}\r\n\t\r\n\t.login-other {\r\n\t\tmargin-top: 50rpx;\r\n\t\t.other-text {\r\n\t\t\tdisplay: flex;\r\n\t\t\tjustify-content: center;\r\n\t\t\tpadding: 50rpx;\r\n\t\t\tcolor: #fff;\r\n\t\t}\r\n\t\t.other-text::after {\r\n\t\t\tflex: 1;\r\n\t\t\tcontent: '';\r\n\t\t\theight: 2rpx;\r\n\t\t\tmargin-top: 20rpx;\r\n\t\t\tmargin-left: 10rpx;\r\n\t\t\tbackground-color: #515151;\r\n\t\t}\r\n\t\t.other-text::before {\r\n\t\t\tflex: 1;\r\n\t\t\tcontent: '';\r\n\t\t\theight: 2rpx;\r\n\t\t\tmargin-top: 20rpx;\r\n\t\t\tmargin-right: 10rpx;\r\n\t\t\tbackground-color: #515151;\r\n\t\t}\r\n\t}\r\n\t.go-login {\r\n\t\tmargin-top: 80rpx;\r\n\t\tcolor: #fff;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t}\r\n\t.form-data {\r\n\t\tmargin: 150rpx 50rpx;\r\n\t\t\r\n\t\t.foget-password:hover {\r\n\t\t\tcolor: #918877;\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\n\r\n\n</style>\n","import MiniProgramPage from 'E:/project_all/SeekStay/seekstay/subPackages/user/login/login.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","reactive","tokenNavigateTo","requestService","res","uni"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAqEA,UAAM,UAAUA,cAAAA,IAAK;AAErB,UAAM,WAAWC,cAAAA,SAAS;AAAA,MACzB,MAAM;AAAA,MACN,UAAU;AAAA,IACX,CAAC;AAED,UAAM,QAAQ;AAAA,MACb,MAAM;AAAA,QACL,OAAO;AAAA,UACN;AAAA,YACC,UAAU;AAAA,YACV,cAAc;AAAA,UACd;AAAA,QACD;AAAA,MACD;AAAA,MACD,UAAU;AAAA,QACT,OAAO;AAAA,UACN;AAAA,YACC,UAAU;AAAA,YACV,cAAc;AAAA,UACd;AAAA,UACD;AAAA,YACC,WAAW;AAAA,YACX,WAAW;AAAA,YACX,cAAc;AAAA,UACd;AAAA,QACD;AAAA,MACD;AAAA,IACF;AAEA,UAAM,iBAAiB,MAAM;AAC5BC,4BAAe,gBAAC,mDAAmD,KAAK;AAAA,IACzE;AAGA,UAAM,eAAe,MAAM;AAC1B,cAAQ,MAAM,WAAW,KAAK,SAAO;AACpCC,qCAAe,KAAK,UAAU,IAAI;AAAA,UACjC,MAAM,SAAS;AAAA,UACf,UAAU,SAAS;AAAA,QACtB,CAAG,EAAE,KAAK,CAAAC,SAAO;AACd,cAAGA,KAAI,SAAS,OAAO;AACtBC,0BAAAA,MAAI,UAAU;AAAA,cACb,OAAOD,KAAI;AAAA,cACX,MAAM;AAAA,YACX,CAAK;AAAA,UACD;AACD,cAAGA,KAAI,SAAS,OAAO;AACtBC,0BAAAA,MAAI,UAAU;AAAA,cACb,OAAOD,KAAI;AAAA,cACX,MAAM;AAAA,YACX,CAAK;AAAA,UACD;AACDC,wBAAAA,MAAI,eAAe,cAAcD,KAAI,KAAK,KAAK;AAC/CC,wBAAAA,MAAI,UAAU;AAAA,YACb,KAAK;AAAA,UACT,CAAI;AACDA,wBAAAA,MAAI,UAAU;AAAA,YACb,OAAO;AAAA,UACX,CAAI;AAAA,QACJ,CAAG;AAAA,MACH,CAAE,EAAE,MAAM,SAAO;AACfA,sBAAAA,MAAY,MAAA,OAAA,2CAAA,GAAG;AAAA,MACjB,CAAE;AAAA,IACF;AAEA,UAAM,cAAc,MAAM;AACzB,eAAS,OAAO;AAChB,eAAS,WAAW;AACpB,cAAQ,MAAM,cAAe;AAAA,IAC9B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC3IA,GAAG,WAAW,eAAe;"}