{"version":3,"file":"room-detail.js","sources":["pages/room-detail/room-detail.vue","D:/download/HBuilderX.4.15.2024050802/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvcm9vbS1kZXRhaWwvcm9vbS1kZXRhaWwudnVl"],"sourcesContent":["<template>\n\t<view class=\"room-detail\">\r\n\t\t<!-- 头部导航 -->\r\n\t\t<uni-nav-bar\r\n\t\t  dark\r\n\t\t  :fixed=\"true\"\r\n\t\t  background-color=\"#c5b6a0\"\r\n\t\t  status-bar\r\n\t\t  left-icon=\"left\"\r\n\t\t  left-text=\"返回\"\r\n\t\t  title=\"房屋详情\"\r\n\t\t  @clickLeft=\"handleBack\"\r\n\t\t/>\r\n\t\t<!-- 收藏图标 -->\r\n\t\t<view @click=\"changeCollectState\">\r\n\t\t\t<image class=\"collect\" v-show=\"!collected\" src=\"@/static/img/collect.png\" mode=\"scaleToFill\"></image>\r\n\t\t\t<image class=\"collect\" v-show=\"collected\" src=\"@/static/img/collected.png\" mode=\"scaleToFill\"></image>\r\n\t\t</view>\r\n\t\t<!-- 轮播区域 -->\n\t\t<swiper class=\"swiper\" :indicator-dots=\"true\" :autoplay=\"true\" :interval=\"3000\" :duration=\"1000\">\r\n\t\t\t<template v-for=\"url in data?.imgUrl\">\r\n\t\t\t\t<swiper-item>\r\n\t\t\t\t\t<image class=\"image\" :src=\"url\" mode=\"scaleToFill\"></image>\r\n\t\t\t\t</swiper-item>\r\n\t\t\t</template>\r\n\t\t</swiper>\r\n\t\t<!-- 内容 -->\r\n\t\t<view class=\"content\">\r\n\t\t\t<!-- 标题 -->\r\n\t\t\t<view class=\"title\">\r\n\t\t\t\t<view class=\"location\">{{ data?.location }}</view>\r\n\t\t\t\t<view class=\"desc\">{{ data?.description }}</view>\r\n\t\t\t</view>\r\n\t\t\t<!-- 评分栏 -->\r\n\t\t\t<view class=\"score-bar\">\r\n\t\t\t\t<ScoreBar :score=\"data?.score\"></ScoreBar>\r\n\t\t\t</view>\r\n\t\t\t<!-- 房东信息 -->\r\n\t\t\t<view class=\"host\">\r\n\t\t\t\t<image class=\"host-image\" src=\"/static/img/user-avator.png\" mode=\"scaleToFill\"></image>\r\n\t\t\t\t<view class=\"host-message\">\r\n\t\t\t\t\t<view class=\"host-name\">房东：XX</view>\r\n\t\t\t\t\t<view class=\"host-text\">超赞房东，7年出租经验</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<!-- 日期选择 -->\r\n\t\t\t<view class=\"date-pick\">\r\n\t\t\t\t<view class=\"date-title\">请选择订房日期</view>\r\n\t\t\t\t<view class=\"date-desc\">请添加日期以查看价格</view>\r\n\t\t\t\t<view class=\"calendar\">\r\n\t\t\t\t\t<DatePicker></DatePicker>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<!-- 入住须知 -->\r\n\t\t\t<view class=\"check-in\">\r\n\t\t\t\t<view class=\"block\">\r\n\t\t\t\t\t<view class=\"header\">取消政策</view>\r\n\t\t\t\t\t<view class=\"instructions\">\r\n\t\t\t\t\t\t添加行程日期，查看此次住宿的取消政策详情\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"block\">\r\n\t\t\t\t\t<view class=\"header\">\r\n\t\t\t\t\t\t入住须知\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"instructions\">\r\n\t\t\t\t\t\t<view class=\"\">下午3:00后可入住</view>\r\n\t\t\t\t\t\t<view class=\"in-item\">上午11:00前退房</view>\r\n\t\t\t\t\t\t<view class=\"in-item\">最多两位房客</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"block\">\r\n\t\t\t\t\t<view class=\"header\">人生安全与房源</view>\r\n\t\t\t\t\t<view class=\"instructions\">\r\n\t\t\t\t\t\t<view class=\"\">无门或无门锁的泳池/热水泳池</view>\r\n\t\t\t\t\t\t<view class=\"in-item\">附近的湖泊、河流、其他水体</view>\r\n\t\t\t\t\t\t<view class=\"in-item\">已配备一氧化碳报警器</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t\r\n\t\t</view>\n\t\t<!-- 底部导航 -->\r\n\t\t<view class=\"bottom-block\">\r\n\t\t\t<view class=\"bk\">\r\n\t\t\t\t<view class=\"\">客服支持</view>\r\n\t\t\t\t<view class=\"\">帮助中心</view>\r\n\t\t\t\t<view class=\"\">安全问题求助</view>\r\n\t\t\t\t<view class=\"\">[四海无忧]</view>\r\n\t\t\t\t<view class=\"\">反歧视</view>\r\n\t\t\t\t<view class=\"\">残障人士支持</view>\r\n\t\t\t\t<view class=\"\">取消预定的选择</view>\r\n\t\t\t\t<view class=\"\">举报邻里问题</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"bk\">\r\n\t\t\t\t<view class=\"\">出租房源</view>\r\n\t\t\t\t<view class=\"\">新闻</view>\r\n\t\t\t\t<view class=\"\">新功能</view>\r\n\t\t\t\t<view class=\"\">工作机会</view>\r\n\t\t\t\t<view class=\"\">投资者</view>\r\n\t\t\t\t<view class=\"\">礼品卡</view>\r\n\t\t\t\t<view class=\"\">紧急住宿</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"bk\">\r\n\t\t\t\t<view class=\"\">出租资源</view>\r\n\t\t\t\t<view class=\"\">社区论坛</view>\r\n\t\t\t\t<view class=\"\">负责人地出租</view>\r\n\t\t\t\t<view class=\"\">参加免费的出租相关课程</view>\r\n\t\t\t\t<view class=\"\">寻找房屋管家</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<!-- 预定栏 -->\r\n\t\t<view class=\"schedule-bar\">\r\n\t\t\t<view class=\"price-night\">\r\n\t\t\t\t<view style=\"font-size: 38rpx;\">￥{{data?.price}}/晚</view>\r\n\t\t\t\t<view style=\"font-size: 20rpx;\">{{ formatDate(orderStore.startTime)}}至{{ formatDate(orderStore.endTime)}}</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"order\"> \r\n\t\t\t\t<button class=\"order-btn\" type=\"default\" @click=\"handleOrder\">预定</button>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</view>\n</template>\n\n<script setup>\r\nimport { onLoad } from '@dcloudio/uni-app'\nimport { useDataStore } from '../../store/dataStore';\nimport { ref } from 'vue';\nimport { useOrderStore } from '../../store/orderStore';\nimport { formatDate } from '../../utils/formatDate';\r\nimport requestService from '../../service/index.js'\n\r\nconst data = ref()\r\nconst collected = ref(false)\r\nconst dataStore = useDataStore()\r\nconst orderStore = useOrderStore()\r\n\r\nonLoad(async (option) => {\r\n\t// 重设orderStore数据\r\n\torderStore.reset()\r\n\t// 根据id请求数据\r\n\tconst res = await requestService.get(`/detail?id=${option.id}`)\r\n\tdata.value = res.data.listDeatil\r\n\tcollected.value = res.data.collected\r\n\t// 保存房间信息到store\r\n\torderStore.roomData = data.value\r\n})\r\n\r\nconst handleBack = () => {\r\n\tuni.navigateBack()\r\n}\r\n\r\n// 切换收藏状态\r\nconst changeCollectState = () => {\r\n\tcollected.value = !collected.value\r\n\tif(collected.value) {\r\n\t\tuni.showToast({\r\n\t\t\ttitle: '已收藏'\r\n\t\t})\r\n\t\trequestService.post('/collect', {}, {\r\n\t\t\tlistId: data.value.id\r\n\t\t})\r\n\t}\r\n\telse {\r\n\t\tuni.showToast({\r\n\t\t\ttitle: '已取消收藏'\r\n\t\t})\r\n\t\trequestService.delete('/collect', {}, {\r\n\t\t\tlistId: data.value.id\r\n\t\t})\r\n\t}\r\n}\r\n\r\n// 处理预定点击事件\r\nconst handleOrder = () => {\r\n\tif(!orderStore.startTime) {\r\n\t\tuni.showToast({\r\n\t\t\ttitle: '请先选择订房日期',\r\n\t\t\ticon: 'error'\r\n\t\t})\r\n\t\treturn\r\n\t}\r\n\tif(!orderStore.endTime && orderStore.startTime) {\r\n\t\tuni.showToast({\r\n\t\t\ttitle: '请选择退房日期',\r\n\t\t\ticon: 'error'\r\n\t\t})\r\n\t\treturn\r\n\t}\r\n\tuni.navigateTo({\r\n\t\turl: '/pages/apply-order/apply-order'\r\n\t})\r\n}\r\n\n</script>\n\n<style scoped lang=\"scss\">\n\r\n.room-detail {\r\n\tposition: relative;\r\n\tpadding-bottom: 160rpx;\r\n\t.collect {\r\n\t\twidth: 60rpx;\r\n\t\theight: 60rpx;\r\n\t\tposition: fixed;\r\n\t\tright: 6rpx;\r\n\t\ttop: 100rpx;\r\n\t\tz-index: 10;\r\n\t\tcursor: pointer;\r\n\r\n\t}\r\n\t.swiper {\r\n\t\theight: 500rpx;\r\n\t\t.image {\r\n\t\t\twidth: 100%;\r\n\t\t\theight: 600rpx;\r\n\t\t}\r\n\t}\r\n\t.content {\r\n\t\tmargin: 0 50rpx;\r\n\t\t.title {\r\n\t\t\tmargin-top: 50rpx;\r\n\t\t\ttext-align: center;\r\n\t\t\t.location {\r\n\t\t\t\tfont-size: 48rpx;\r\n\t\t\t\tfont-weight: 500;\r\n\t\t\t}\r\n\t\t\t.desc {\r\n\t\t\t\tmargin-top: 10rpx;\r\n\t\t\t}\r\n\t\t}\r\n\t\t.score-bar {\r\n\t\t\tmargin-top: 40rpx;\r\n\t\t}\r\n\t\t.host {\r\n\t\t\tdisplay: flex;\r\n\t\t\tmargin-top: 40rpx;\r\n\t\t\talign-items: center;\r\n\t\t\t.host-image {\r\n\t\t\t\tborder: 1rpx solid rgba(0, 0, 0, 0.6);\r\n\t\t\t\twidth: 90rpx;\r\n\t\t\t\theight: 90rpx;\r\n\t\t\t\tborder-radius: 100%;\r\n\t\t\t}\r\n\t\t\t.host-message {\r\n\t\t\t\tmargin-left: 30rpx;\r\n\t\t\t\t.host-name {\r\n\t\t\t\t\tfont-size: 36rpx;\r\n\t\t\t\t\tfont-weight: 600;\r\n\t\t\t\t}\r\n\t\t\t\t.host-text {\r\n\t\t\t\t\tfont-size: 12rpx;\r\n\t\t\t\t\tcolor: #8c8c8c;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t.date-pick {\r\n\t\t\tmargin-top: 80rpx;\r\n\t\t\t.date-title {\r\n\t\t\t\tfont-size: 48rpx;\r\n\t\t\t\tfont-weight: 600;\r\n\t\t\t}\r\n\t\t\t.date-desc {\r\n\t\t\t\tfont-size: 32rpx;\r\n\t\t\t\tcolor: #8c8c8c;\r\n\t\t\t}\r\n\t\t}\r\n\t\t.calendar {\r\n\t\t\tmargin-top: 40rpx;\r\n\t\t}\r\n\t\t.check-in {\r\n\t\t\tmargin-top: 80rpx;\r\n\t\t\t.block {\r\n\t\t\t\tpadding: 40rpx;\r\n\t\t\t\tborder-top: 1rpx solid rgba(0, 0, 0, 0.4);\r\n\t\t\t\t.header {\r\n\t\t\t\t\tfont-size: 48rpx;\r\n\t\t\t\t\tfont-weight: 600;\r\n\t\t\t\t}\r\n\t\t\t\t.instructions {\r\n\t\t\t\t\tmargin-top: 20rpx;\r\n\t\t\t\t\tfont-size: 28rpx;\r\n\t\t\t\t\tcolor: #8c8c8c;\r\n\t\t\t\t\t.in-item {\r\n\t\t\t\t\t\tmargin-top: 10rpx;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t.bottom-block {\r\n\t\tpadding: 40rpx;\r\n\t\tbackground-color: #dddddd;\r\n\t\t.bk {\r\n\t\t\tpadding: 40rpx;\r\n\t\t\tborder-bottom: 1rpx solid rgba(0, 0, 0, 0.3);\r\n\t\t\tfont-size: 24rpx;\r\n\t\t\tfont-weight: 400;\r\n\t\t\tview {\r\n\t\t\t\tmargin-top: 20rpx;\r\n\t\t\t\tcursor: pointer;\r\n\t\t\t\t&:hover {\r\n\t\t\t\t\tcolor: #a1a1a1;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t.schedule-bar {\r\n\t\tposition: fixed;\r\n\t\tbottom: 0;\r\n\t\twidth: 100%;\r\n\t\theight: 160rpx;\r\n\t\tbox-sizing: border-box;\r\n\t\tpadding: 40rpx;\r\n\t\ttext-align: center;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\talign-items: center;\r\n\t\tbackground-color: #ffffff;\r\n\t\t.order-btn {\r\n\t\t\tbackground-color: #da0b64;\r\n\t\t\tcolor: white;\r\n\t\t\twidth: 200rpx;\r\n\t\t\theight: 80rpx;\r\n\t\t\tdisplay: flex;\r\n\t\t\talign-items: center;\r\n\t\t\tjustify-content: center;\r\n\t\t\t&:active {\r\n\t\t\t\tbox-shadow: 0 0 1rpx 4rpx rgba(0, 0, 0, 0.1);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\n\n</style>\n","import MiniProgramPage from 'E:/project_all/uni-app/seekstay/pages/room-detail/room-detail.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","useDataStore","useOrderStore","onLoad","requestService","uni"],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAoIA,UAAM,OAAOA,cAAAA,IAAK;AAClB,UAAM,YAAYA,cAAG,IAAC,KAAK;AACTC,oBAAAA,aAAc;AAChC,UAAM,aAAaC,iBAAAA,cAAe;AAElCC,kBAAM,OAAC,OAAO,WAAW;AAExB,iBAAW,MAAO;AAElB,YAAM,MAAM,MAAMC,cAAAA,eAAe,IAAI,cAAc,OAAO,EAAE,EAAE;AAC9D,WAAK,QAAQ,IAAI,KAAK;AACtB,gBAAU,QAAQ,IAAI,KAAK;AAE3B,iBAAW,WAAW,KAAK;AAAA,IAC5B,CAAC;AAED,UAAM,aAAa,MAAM;AACxBC,oBAAAA,MAAI,aAAc;AAAA,IACnB;AAGA,UAAM,qBAAqB,MAAM;AAChC,gBAAU,QAAQ,CAAC,UAAU;AAC7B,UAAG,UAAU,OAAO;AACnBA,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,QACV,CAAG;AACDD,qCAAe,KAAK,YAAY,IAAI;AAAA,UACnC,QAAQ,KAAK,MAAM;AAAA,QACtB,CAAG;AAAA,MACD,OACI;AACJC,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,QACV,CAAG;AACDD,qCAAe,OAAO,YAAY,IAAI;AAAA,UACrC,QAAQ,KAAK,MAAM;AAAA,QACtB,CAAG;AAAA,MACD;AAAA,IACF;AAGA,UAAM,cAAc,MAAM;AACzB,UAAG,CAAC,WAAW,WAAW;AACzBC,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,UACP,MAAM;AAAA,QACT,CAAG;AACD;AAAA,MACA;AACD,UAAG,CAAC,WAAW,WAAW,WAAW,WAAW;AAC/CA,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,UACP,MAAM;AAAA,QACT,CAAG;AACD;AAAA,MACA;AACDA,oBAAAA,MAAI,WAAW;AAAA,QACd,KAAK;AAAA,MACP,CAAE;AAAA,IACF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC/LA,GAAG,WAAW,eAAe;"}