{"version":3,"file":"search.js","sources":["pages/search/search.vue","D:/download/HBuilderX.4.15.2024050802/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvc2VhcmNoL3NlYXJjaC52dWU"],"sourcesContent":["<template>\n  <!-- 自定义标题导航 -->\n  <view class=\"custom-nav-bar\">\n    <uni-nav-bar\n      backgroundColor=\"#c5b6a0\"\n      :border=\"false\"\n      :fixed=\"true\"\n      status-bar\n      title=\"寻栖\"\n      color=\"#625b50\"\n      style=\"font-weight: 600; height: 100rpx;\"\n      :right-icon=\"rightIcon\"\n      @clickRight=\"handleSearchClick\"\n    >\n      <template v-slot:left>\n        <image src=\"https://img.picgo.net/2025/02/13/seekstayb3a7c86cda0409f8.png\"\r\n\t\t\t\t mode=\"aspectFit\"></image>\n      </template>\n    </uni-nav-bar>\n  </view>\n  <!-- 搜索框 -->\n  <view class=\"search-bar\" v-if=\"showSearchBar\">\n    <uni-transition mode-class=\"slide-top\" show=\"true\">\n      <SearchBar></SearchBar>\n    </uni-transition>\n  </view>\n  <!-- 标签导航 -->\n  <view class=\"tag-bar\">\n    <TagBar></TagBar>\n  </view>\n\t<!-- 骨架屏 -->\r\n\t<view v-if=\"!dataStore.dataList.length\" style=\"padding-bottom: 100rpx;\">\r\n\t\t<template v-for=\"(item, index) in Array.from({ length: 6 })\" :key=\"index\">\r\n\t\t\t<view class=\"skeleton\">\r\n\t\t\t\t<view class=\"image\"></view>\r\n\t\t\t\t<view class=\"context\">\r\n\t\t\t\t\t<view class=\"context-item\" style=\"width: 600rpx;\"></view>\r\n\t\t\t\t\t<view class=\"context-item\"></view>\r\n\t\t\t\t\t<view class=\"context-item\"></view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</template>\r\n\t</view>\r\n\t<!-- 数据列表 -->\r\n\t<VirtualList v-else :list=\"dataStore.dataList\" :itemHeight=\"420\" :contentHeight=\"contentHeight\">\r\n\t\t<template v-slot=\"slotProps\">\r\n\t\t\t<RoomResource :data=\"slotProps.item\" @navigate=\"handleItemClick(slotProps.item.id)\"></RoomResource>\r\n\t\t</template>\r\n\t</VirtualList>\n</template>\n\n<script setup>\nimport { computed, ref } from \"vue\";\nimport { onLoad, onPullDownRefresh } from \"@dcloudio/uni-app\";\nimport { useDataStore } from \"../../store/dataStore.js\";\r\nimport { tokenNavigateTo } from '../../utils/tokenNavigateTo.js'\nconst rightIcon = ref();\nconst showSearchBar = ref(true);\nconst dataStore = useDataStore();\ndataStore.fetchDataList(1);\r\ndataStore.fetchTagList();\r\nconst systemInfo = uni.getSystemInfoSync();\r\nconst contentHeight = computed(() => {\r\n\treturn systemInfo.windowHeight - 150\r\n})\r\n\nonLoad(async () => {\r\n\tuni.startPullDownRefresh()\r\n\tsetTimeout(() => {\r\n\t    uni.stopPullDownRefresh();\r\n\t  }, 1000);\r\n});\n// 监听下拉刷新函数\r\nonPullDownRefresh(() => {\r\n\tsetTimeout(() => {\r\n\t\tuni.stopPullDownRefresh();\r\n\t}, 1000);\r\n})\r\n\n// 除微信小程序端外添加标题导航栏的搜索图标\n// #ifndef MP-WEIXIN\nrightIcon.value = \"search\";\nshowSearchBar.value = false;\n\n// #endif\r\n// 显示搜索框\nconst handleSearchClick = () => {\n  showSearchBar.value = !showSearchBar.value;\n};\r\n\r\n// 处理房源点击事件\r\nconst handleItemClick = (id) => {\r\n\ttokenNavigateTo(`/subPackages/order/room-detail/room-detail?id=${id}`, true)\r\n}\r\n\n</script>\n\n<style scoped lang=\"scss\">\n.room-list {\r\n\tpadding-top: 20rpx;\r\n\tbox-sizing: border-box;\r\n}\r\n.tag-bar {\r\n\theight: 100rpx;\r\n}\r\n.skeleton {\r\n\t@keyframes skeleton-loading {\r\n\t  0% { background-color: #e0e0e0; }\r\n\t  100% { background-color: #f5f5f5; }\r\n\t}\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n\talign-items: center;\r\n\tmargin-bottom: 20rpx;\r\n\t.image {\r\n\t\theight: 600rpx;\r\n\t\twidth: 600rpx;\r\n\t\tborder-radius: 20rpx;\r\n\t\tbackground-color: #ccc;\r\n\t\tanimation: skeleton-loading 1.5s infinite alternate;\r\n\t}\r\n\t.context {\r\n\t\twidth: 600rpx;\r\n\t\t.context-item {\r\n\t\t\tmargin-top: 10rpx;\r\n\t\t\twidth: 200rpx;\r\n\t\t\theight: 40rpx;\r\n\t\t\tborder-radius: 20rpx;\r\n\t\t\tbackground-color: #ccc;\r\n\t\t\tanimation: skeleton-loading 1.5s infinite alternate;\r\n\t\t}\r\n\t}\r\n}\n</style>\n","import MiniProgramPage from 'E:/project_all/SeekStay/seekstay/pages/search/search.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","useDataStore","uni","computed","onLoad","onPullDownRefresh","tokenNavigateTo"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAwDA,UAAM,YAAYA,cAAG,IAAA;AACrB,UAAM,gBAAgBA,cAAAA,IAAI,IAAI;AAC9B,UAAM,YAAYC,gBAAY,aAAA;AAC9B,cAAU,cAAc,CAAC;AACzB,cAAU,aAAY;AACtB,UAAM,aAAaC,cAAAA,MAAI;AACvB,UAAM,gBAAgBC,cAAQ,SAAC,MAAM;AACpC,aAAO,WAAW,eAAe;AAAA,IAClC,CAAC;AAEDC,kBAAAA,OAAO,YAAY;AAClBF,oBAAAA,MAAI,qBAAsB;AAC1B,iBAAW,MAAM;AACbA,sBAAG,MAAC,oBAAmB;AAAA,MACxB,GAAE,GAAI;AAAA,IACV,CAAC;AAEDG,kBAAAA,kBAAkB,MAAM;AACvB,iBAAW,MAAM;AAChBH,sBAAG,MAAC,oBAAmB;AAAA,MACvB,GAAE,GAAI;AAAA,IACR,CAAC;AASD,UAAM,oBAAoB,MAAM;AAC9B,oBAAc,QAAQ,CAAC,cAAc;AAAA,IACvC;AAGA,UAAM,kBAAkB,CAAC,OAAO;AAC/BI,4BAAAA,gBAAgB,iDAAiD,EAAE,IAAI,IAAI;AAAA,IAC5E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC5FA,GAAG,WAAW,eAAe;"}