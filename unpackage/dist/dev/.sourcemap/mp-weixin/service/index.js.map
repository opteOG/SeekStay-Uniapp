{"version":3,"file":"index.js","sources":["service/index.js"],"sourcesContent":["import { BASE_URL, TIME_OUT } from \"./config\";\r\n\r\nclass RequestService {\r\n\t// 通用请求方法\r\n\t/**\r\n\t * @param {String} method 请求方式  \r\n\t * @param {String} url 请求路径\r\n\t * @param {Object} headers 请求头信息\r\n\t * @param {Object} data 请求携带数据\r\n\t */\r\n\t_request(method, url, headers = {}, data = {}) {\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\ttry {\r\n\t\t\t\tconst token = uni.getStorageSync('user_token') \r\n\t\t\t\tuni.request({\r\n\t\t\t\t\turl: BASE_URL + url,\r\n\t\t\t\t\tmethod: method,\r\n\t\t\t\t\ttimeout: TIME_OUT,\r\n\t\t\t\t\theader: Object.assign({\r\n\t\t\t\t\t  \"Content-Type\": \"application/json\",\r\n\t\t\t\t\t  'Authorization': `Bearer ${token}`\r\n\t\t\t\t\t}, headers),\r\n\t\t\t\t\tdata: data,\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\tif (res.statusCode === 200) {\r\n\t\t\t\t\t\t\tresolve(res.data);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\treject(new Error(`Request failed with status ${res.statusCode}`));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: (err) => {\r\n\t\t\t\t\t\treject(err);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t} catch (err) {\r\n\t\t\t\tconsole.log(err);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t// get 请求\r\n\tget(url, headers = {}) {\r\n\t\treturn this._request('GET', url, headers);\r\n\t}\r\n\r\n\t// post 请求\r\n\tpost(url, headers = {}, data = {}) {\r\n\t\treturn this._request('POST', url, headers, data);\r\n\t}\r\n\t\r\n\t// delete 请求\r\n\tdelete(url, headers = {}, data = {}) {\r\n\t\treturn this._request('DELETE', url, headers, data)\r\n\t}\r\n\t\r\n\t// patch 请求\r\n\tpatch(url, headers = {}, data = {}) {\r\n\t\treturn this._request('PATCH', url, headers, data)\r\n\t}\r\n}\r\n\r\nexport default new RequestService();"],"names":["uni","BASE_URL","TIME_OUT"],"mappings":";;;AAEA,MAAM,eAAe;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAQpB,SAAS,QAAQ,KAAK,UAAU,CAAE,GAAE,OAAO,IAAI;AAC9C,WAAO,IAAI,QAAQ,CAAC,SAAS,WAAW;AACvC,UAAI;AACH,cAAM,QAAQA,cAAAA,MAAI,eAAe,YAAY;AAC7CA,sBAAAA,MAAI,QAAQ;AAAA,UACX,KAAKC,eAAQ,WAAG;AAAA,UAChB;AAAA,UACA,SAASC,eAAQ;AAAA,UACjB,QAAQ,OAAO,OAAO;AAAA,YACpB,gBAAgB;AAAA,YAChB,iBAAiB,UAAU,KAAK;AAAA,UACjC,GAAE,OAAO;AAAA,UACV;AAAA,UACA,SAAS,CAAC,QAAQ;AACjB,gBAAI,IAAI,eAAe,KAAK;AAC3B,sBAAQ,IAAI,IAAI;AAAA,YACvB,OAAa;AACN,qBAAO,IAAI,MAAM,8BAA8B,IAAI,UAAU,EAAE,CAAC;AAAA,YAChE;AAAA,UACD;AAAA,UACD,MAAM,CAAC,QAAQ;AACd,mBAAO,GAAG;AAAA,UACV;AAAA,QACN,CAAK;AAAA,MACD,SAAQ,KAAK;AACbF,sBAAAA,MAAA,MAAA,OAAA,0BAAY,GAAG;AAAA,MACf;AAAA,IACJ,CAAG;AAAA,EACD;AAAA;AAAA,EAGD,IAAI,KAAK,UAAU,IAAI;AACtB,WAAO,KAAK,SAAS,OAAO,KAAK,OAAO;AAAA,EACxC;AAAA;AAAA,EAGD,KAAK,KAAK,UAAU,CAAA,GAAI,OAAO,CAAA,GAAI;AAClC,WAAO,KAAK,SAAS,QAAQ,KAAK,SAAS,IAAI;AAAA,EAC/C;AAAA;AAAA,EAGD,OAAO,KAAK,UAAU,CAAA,GAAI,OAAO,CAAA,GAAI;AACpC,WAAO,KAAK,SAAS,UAAU,KAAK,SAAS,IAAI;AAAA,EACjD;AAAA;AAAA,EAGD,MAAM,KAAK,UAAU,CAAA,GAAI,OAAO,CAAA,GAAI;AACnC,WAAO,KAAK,SAAS,SAAS,KAAK,SAAS,IAAI;AAAA,EAChD;AACF;AAEA,MAAe,iBAAA,IAAI,eAAgB;;"}